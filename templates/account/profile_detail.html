{% extends 'base.html' %}

{% load static %}

{% block title %}
プロフィール
{% endblock %}

{% block content %}


<h2>{{ profile.name }} のプロフィール</h2>

<div class="border">
    <div class="row">
        <div class="col-3">
            {% if profile.image %}
            <img src="{{ profile.image.url }}" alt="" style="width: 100px; height: 100px">
            {% else %}
            <img src="{% static 'accounts/user_image/default_image.jpeg' %}" alt="" style="width: 100px; height: 100px">
            {% endif %}
        </div>
        <div class="col-9">
            <span>自己紹介：</span>
            <p>{{ profile.introduction | linebreaksbr }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <p>投稿数：{{ posts | length }}</p>
            <p>コメント数：</p>
        </div>
        <div class="col">
            <p>年齢：{{ profile.age | default_if_none:"未設定" }}</p>
            <p>性別：{{ profile.get_bio_display }}</p>
        </div>
        <div class="col">
            <p>勤務地：{{ profile.get_workplace_display | default_if_none:"未設定" }}</p>
            <p>職業：{{ profile.get_occapation_display | default_if_none:"未設定" }}</p>
        </div>
        <div class="col">
            <p>業種：{{ profile.get_industry_display | default_if_none:"未設定" }}</p>
            <p>職種：{{ profile.get_position_display | default_if_none:"未設定" }}</p>
        </div>
    </div>


</div>


<div class="">
    {% for post in page_obj %}
    <a href="{% url 'app:post_detail' post.id %}">
        <div class="row border">
            <div class="col-3">{{ post.book_title }}</div>
            <div class="col-3">{{ post.satisfaction }}</div>
            <div class="col-3">{{ post.post_title }}</div>
            <div class="col-3">{{ post.created_at | date:"Y/m/d H:i" }}</div>
        </div>
    </a>
    {% endfor %}
</div>

<nav aria-label="Page navigation">
    {% if page_obj.has_other_pages %}
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
        <li class="page-item"><a class="page-link" href="?page=1">最初</a></li>
        {% else %}
        <li class="page-item disable"><span class="page-link text-secondary">最初</span></li>
        {% endif %}

        {% if page_obj.number|add:'-2' > 1 %}
        <li class="page-item"><a class="page-link" href="?page={{ page_obj.number|add:'-2' }}">&hellip;</a></li>
        {% endif %}

        {% for i in page_obj.paginator.page_range %}
        {% if page_obj.number == i %}
        <li class="page-item active"><span class="page-link">{{ i }}<span class="visually-hidden"></span></li>
        {% elif i > page_obj.number|add:'-2' and i < page_obj.number|add:'2' %} <li class="page-item"><a
                class="page-link" href="?page={{ i }}">{{ i }}</a></li>
            {% endif %}
            {% endfor %}

            {% if page_obj.paginator.num_pages > page_obj.number|add:'2' %}
            <li><a class="page-link" href="?page={{ page_obj.number|add:'2' }}">&hellip;</a></li>
            <li><a href="?page={{ i }}">{{ i }}</a></li>
            <li><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">{{ page_obj.paginator.num_pages
                    }}</a></li>
            {% endif %}

            {% if page_obj.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">最後</a></li>
            {% else %}
            <li class="page-item disable"><span class="page-link text-secondary">最後</span></li>
            {% endif %}
    </ul>
    {% endif %}
</nav>



{% endblock %}
